---
version: "3.7"

services:
  cli:
    build:
      context: ./
      dockerfile: tools/docker/cli/Dockerfile
  phpunit:
    build:
      context: ./
      dockerfile: tools/docker/phpunit/Dockerfile
    environment:
      PHPUNIT_RESULT_CACHE: '/cache/.phpunit.result.cache'
    volumes:
      - .:/security-check
      - type: tmpfs
        target: /cache
  security-check:
    build:
      context: ./
      dockerfile: tools/docker/security-check/Dockerfile
    volumes:
      - .:/security-check